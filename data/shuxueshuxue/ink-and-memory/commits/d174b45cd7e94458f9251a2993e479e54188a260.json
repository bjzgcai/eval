{
  "sha": "d174b45cd7e94458f9251a2993e479e54188a260",
  "node_id": "C_kwDOP2Zrm9oAKGQxNzRiNDVjZDdlOTQ0NThmOTI1MWEyOTkzZTQ3OWU1NDE4OGEyNjA",
  "commit": {
    "author": {
      "name": "lexicalmathical",
      "email": "lexicalmathical@gmail.com",
      "date": "2025-11-19T10:41:15Z"
    },
    "committer": {
      "name": "lexicalmathical",
      "email": "lexicalmathical@gmail.com",
      "date": "2025-11-19T10:41:15Z"
    },
    "message": "Add friend timeline rail and i18n hooks",
    "tree": {
      "sha": "9630801c096b954f3cba8d31e834c1d1a26b4841",
      "url": "https://api.github.com/repos/shuxueshuxue/ink-and-memory/git/trees/9630801c096b954f3cba8d31e834c1d1a26b4841"
    },
    "url": "https://api.github.com/repos/shuxueshuxue/ink-and-memory/git/commits/d174b45cd7e94458f9251a2993e479e54188a260",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null,
      "verified_at": null
    }
  },
  "url": "https://api.github.com/repos/shuxueshuxue/ink-and-memory/commits/d174b45cd7e94458f9251a2993e479e54188a260",
  "html_url": "https://github.com/shuxueshuxue/ink-and-memory/commit/d174b45cd7e94458f9251a2993e479e54188a260",
  "comments_url": "https://api.github.com/repos/shuxueshuxue/ink-and-memory/commits/d174b45cd7e94458f9251a2993e479e54188a260/comments",
  "author": null,
  "committer": null,
  "parents": [
    {
      "sha": "bdbc7cdbfae2d62b29c8e2bf71145a01841e973c",
      "url": "https://api.github.com/repos/shuxueshuxue/ink-and-memory/commits/bdbc7cdbfae2d62b29c8e2bf71145a01841e973c",
      "html_url": "https://github.com/shuxueshuxue/ink-and-memory/commit/bdbc7cdbfae2d62b29c8e2bf71145a01841e973c"
    }
  ],
  "stats": {
    "total": 959,
    "additions": 803,
    "deletions": 156
  },
  "files": [
    {
      "sha": "1afc75df567fc41c92066c54c202722ff5b0e434",
      "filename": "backend/database.py",
      "status": "modified",
      "additions": 30,
      "deletions": 0,
      "changes": 30,
      "blob_url": "https://github.com/shuxueshuxue/ink-and-memory/blob/d174b45cd7e94458f9251a2993e479e54188a260/backend%2Fdatabase.py",
      "raw_url": "https://github.com/shuxueshuxue/ink-and-memory/raw/d174b45cd7e94458f9251a2993e479e54188a260/backend%2Fdatabase.py",
      "contents_url": "https://api.github.com/repos/shuxueshuxue/ink-and-memory/contents/backend%2Fdatabase.py?ref=d174b45cd7e94458f9251a2993e479e54188a260",
      "patch": "@@ -1257,6 +1257,36 @@ def get_daily_picture_full(user_id: int, date: str):\n     finally:\n         db.close()\n \n+\n+def get_friend_picture_full(user_id: int, friend_id: int, date: str):\n+    \"\"\"Get full resolution image for a friend's specific date if users are friends.\"\"\"\n+    db = get_db()\n+    try:\n+        friendship = db.execute(\"\"\"\n+        SELECT id FROM friendships\n+        WHERE status = 'accepted' AND (\n+          (user_id = ? AND friend_id = ?) OR\n+          (user_id = ? AND friend_id = ?)\n+        )\n+        \"\"\", (user_id, friend_id, friend_id, user_id)).fetchone()\n+\n+        if not friendship:\n+            return None\n+\n+        row = db.execute(\"\"\"\n+        SELECT image_base64\n+        FROM daily_pictures\n+        WHERE user_id = ? AND date = ?\n+        ORDER BY created_at DESC\n+        LIMIT 1\n+        \"\"\", (friend_id, date)).fetchone()\n+\n+        if row:\n+            return row['image_base64']\n+        return None\n+    finally:\n+        db.close()\n+\n # ========== User Preferences ==========\n \n def save_preferences(user_id: int, voice_configs: dict = None, meta_prompt: str = None,"
    },
    {
      "sha": "a429d46ed86c21d6f09985b158d00cece54cfc2d",
      "filename": "backend/server.py",
      "status": "modified",
      "additions": 18,
      "deletions": 0,
      "changes": 18,
      "blob_url": "https://github.com/shuxueshuxue/ink-and-memory/blob/d174b45cd7e94458f9251a2993e479e54188a260/backend%2Fserver.py",
      "raw_url": "https://github.com/shuxueshuxue/ink-and-memory/raw/d174b45cd7e94458f9251a2993e479e54188a260/backend%2Fserver.py",
      "contents_url": "https://api.github.com/repos/shuxueshuxue/ink-and-memory/contents/backend%2Fserver.py?ref=d174b45cd7e94458f9251a2993e479e54188a260",
      "patch": "@@ -1169,6 +1169,22 @@ def get_picture_full(\n \n     return {\"image_base64\": full_image}\n \n+\n+@app.get(\"/api/friends/{friend_id}/pictures/{date}/full\")\n+def get_friend_picture_full_endpoint(\n+    friend_id: int,\n+    date: str,\n+    current_user: dict = Depends(get_current_user)\n+):\n+    \"\"\"Get full resolution image for a friend's specific date (only if users are friends).\"\"\"\n+    user_id = current_user['user_id']\n+    full_image = database.get_friend_picture_full(user_id, friend_id, date)\n+\n+    if not full_image:\n+        raise HTTPException(status_code=404, detail=\"Picture not found or not accessible\")\n+\n+    return {\"image_base64\": full_image}\n+\n @app.post(\"/api/pictures\")\n def save_picture(\n     request: dict,\n@@ -1634,6 +1650,7 @@ def get_friend_timeline(friend_id: int, limit: int = 30, current_user: dict = De\n     print(\"    DELETE /api/sessions/{id} - Delete session\")\n     print(\"    POST /api/pictures        - Save daily picture\")\n     print(\"    GET  /api/pictures        - List pictures\")\n+    print(\"    GET  /api/pictures/{date}/full - Get full picture by date\")\n     print(\"    GET  /api/preferences     - Get user preferences\")\n     print(\"    POST /api/preferences     - Save preferences\")\n     print(\"    GET  /api/reports         - Get analysis reports\")\n@@ -1660,6 +1677,7 @@ def get_friend_timeline(friend_id: int, limit: int = 30, current_user: dict = De\n     print(\"    GET  /api/friends                 - Get friends list\")\n     print(\"    DELETE /api/friends/{id}          - Remove friend\")\n     print(\"    GET  /api/friends/{id}/timeline   - Get friend's timeline\")\n+    print(\"    GET  /api/friends/{id}/pictures/{date}/full - Get friend's full picture\")\n     print(\"\\n  PolyCLI (AI Functions):\")\n     print(\"    /polycli                  - Control panel UI\")\n     print(\"    /polycli/api/trigger-sync - Direct sync API\")"
    },
    {
      "sha": "637f4da802ea156c23a151047ea660fa861b7800",
      "filename": "frontend/src/api/voiceApi.ts",
      "status": "modified",
      "additions": 17,
      "deletions": 0,
      "changes": 17,
      "blob_url": "https://github.com/shuxueshuxue/ink-and-memory/blob/d174b45cd7e94458f9251a2993e479e54188a260/frontend%2Fsrc%2Fapi%2FvoiceApi.ts",
      "raw_url": "https://github.com/shuxueshuxue/ink-and-memory/raw/d174b45cd7e94458f9251a2993e479e54188a260/frontend%2Fsrc%2Fapi%2FvoiceApi.ts",
      "contents_url": "https://api.github.com/repos/shuxueshuxue/ink-and-memory/contents/frontend%2Fsrc%2Fapi%2FvoiceApi.ts?ref=d174b45cd7e94458f9251a2993e479e54188a260",
      "patch": "@@ -1085,3 +1085,20 @@ export async function getFriendTimeline(friendId: number, limit: number = 30): P\n   const data = await response.json();\n   return data.pictures;\n }\n+\n+/**\n+ * Get friend's full-resolution picture for a specific date\n+ */\n+export async function getFriendPictureFull(friendId: number, date: string): Promise<string> {\n+  const response = await fetch(`${API_BASE}/api/friends/${friendId}/pictures/${date}/full`, {\n+    headers: getAuthHeaders()\n+  });\n+\n+  if (!response.ok) {\n+    const error = await response.json();\n+    throw new Error(error.detail || 'Get friend picture failed');\n+  }\n+\n+  const data = await response.json();\n+  return data.image_base64;\n+}"
    },
    {
      "sha": "049f787fda18f0a46d0c4e3682916a4713b7197e",
      "filename": "frontend/src/components/CollectionsView.tsx",
      "status": "modified",
      "additions": 688,
      "deletions": 154,
      "changes": 842,
      "blob_url": "https://github.com/shuxueshuxue/ink-and-memory/blob/d174b45cd7e94458f9251a2993e479e54188a260/frontend%2Fsrc%2Fcomponents%2FCollectionsView.tsx",
      "raw_url": "https://github.com/shuxueshuxue/ink-and-memory/raw/d174b45cd7e94458f9251a2993e479e54188a260/frontend%2Fsrc%2Fcomponents%2FCollectionsView.tsx",
      "contents_url": "https://api.github.com/repos/shuxueshuxue/ink-and-memory/contents/frontend%2Fsrc%2Fcomponents%2FCollectionsView.tsx?ref=d174b45cd7e94458f9251a2993e479e54188a260",
      "patch": "@@ -1,10 +1,11 @@\n-import { useState, useEffect, useLayoutEffect, useRef } from 'react';\n+import { useState, useEffect, useLayoutEffect, useRef, useMemo } from 'react';\n import { useTranslation } from 'react-i18next';\n import type { Commentor } from '../engine/EditorEngine';\n import { findNormalizedPhrase } from '../utils/textNormalize';\n import { useAuth } from '../contexts/AuthContext';\n import { STORAGE_KEYS } from '../constants/storageKeys';\n import { getDateLocale } from '../i18n';\n+import type { Friend } from '../api/voiceApi';\n \n // @@@ TypeScript interfaces\n interface TimelineDay {\n@@ -15,6 +16,18 @@ interface TimelineDay {\n   daysOffset: number;\n }\n \n+type TimelinePicture = {\n+  date: string;\n+  base64: string;\n+  full_base64?: string;\n+  prompt: string;\n+};\n+\n+interface TimelineEntryData {\n+  picture?: TimelinePicture;\n+  comments: Commentor[];\n+}\n+\n export default function CollectionsView({ isVisible, voiceConfigs }: { isVisible: boolean; voiceConfigs: Record<string, any> }) {\n   const { i18n } = useTranslation();\n   const dateLocale = getDateLocale(i18n.language);\n@@ -189,6 +202,169 @@ function getTextPreview(text: string, maxLength: number = 60): string {\n   return preview;\n }\n \n+interface TimelineCardProps {\n+  day: TimelineDay;\n+  dayData?: TimelineEntryData;\n+  hasData: boolean;\n+  isGenerating: boolean;\n+  placeholder: string;\n+  textByDate: Map<string, string>;\n+  dateLocale: string;\n+  t: (key: string, options?: any) => string;\n+  onImageClick: (picture: TimelinePicture) => void;\n+  onGenerate?: (date: string) => void;\n+  readOnly?: boolean;\n+  customDescription?: string;\n+}\n+\n+function renderTimelineCard({\n+  day,\n+  dayData,\n+  hasData,\n+  isGenerating,\n+  placeholder,\n+  textByDate,\n+  dateLocale,\n+  t,\n+  onImageClick,\n+  onGenerate,\n+  readOnly,\n+  customDescription\n+}: TimelineCardProps) {\n+  const cardCursor = dayData?.picture && !isGenerating ? 'pointer' : 'default';\n+  const textContent = dayData && textByDate.get(day.date);\n+  const commentCount = dayData?.comments?.length || 0;\n+\n+  let description = placeholder;\n+  if (customDescription) {\n+    description = customDescription;\n+  } else if (isGenerating) {\n+    description = t('timeline.generating');\n+  } else if (day.isToday && !dayData?.picture) {\n+    description = placeholder;\n+  } else if (textContent) {\n+    description = getTextPreview(textContent);\n+  } else if (commentCount > 0) {\n+    description = t('timeline.entryCount', { count: commentCount });\n+  }\n+\n+  return (\n+    <div\n+      onClick={() => {\n+        if (dayData?.picture) {\n+          onImageClick(dayData.picture);\n+        }\n+      }}\n+      style={{\n+        display: 'flex',\n+        alignItems: 'center',\n+        gap: '1rem',\n+        padding: '0.5rem 0',\n+        cursor: cardCursor,\n+        transition: 'transform 0.2s',\n+        opacity: day.isPast && !hasData ? 0.4 : 1\n+      }}\n+      onMouseEnter={e => {\n+        if (dayData?.picture && !isGenerating) {\n+          e.currentTarget.style.transform = 'translateX(8px)';\n+        }\n+      }}\n+      onMouseLeave={e => {\n+        e.currentTarget.style.transform = 'translateX(0)';\n+      }}\n+    >\n+      <div style={{ flexShrink: 0 }}>\n+        {dayData?.picture ? (\n+          <div style={{ position: 'relative' }}>\n+            <img\n+              src={`data:image/${dayData.picture.base64?.startsWith('iVBOR') ? 'png' : 'jpeg'};base64,${dayData.picture.base64}`}\n+              alt={dayData.picture.prompt}\n+              style={{\n+                width: '80px',\n+                height: '80px',\n+                objectFit: 'cover',\n+                borderRadius: '6px'\n+              }}\n+            />\n+            {!readOnly && onGenerate && (\n+              <button\n+                onClick={(e) => {\n+                  e.stopPropagation();\n+                  if (!isGenerating) onGenerate(day.date);\n+                }}\n+                disabled={isGenerating}\n+                style={{\n+                  position: 'absolute',\n+                  top: '4px',\n+                  right: '4px',\n+                  width: '24px',\n+                  height: '24px',\n+                  borderRadius: '50%',\n+                  background: 'rgba(255, 255, 255, 0.95)',\n+                  border: 'none',\n+                  cursor: isGenerating ? 'wait' : 'pointer',\n+                  display: 'flex',\n+                  alignItems: 'center',\n+                  justifyContent: 'center',\n+                  opacity: 0.9,\n+                  transition: 'opacity 0.2s'\n+                }}\n+                onMouseEnter={e => {\n+                  if (!isGenerating) e.currentTarget.style.opacity = '1';\n+                }}\n+                onMouseLeave={e => {\n+                  e.currentTarget.style.opacity = '0.9';\n+                }}\n+                title=\"Redraw image\"\n+              >\n+                <svg width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n+                  <path d=\"M21.5 2v6h-6M2.5 22v-6h6M2 11.5a10 10 0 0 1 18.8-4.3M22 12.5a10 10 0 0 1-18.8 4.2\"/>\n+                </svg>\n+              </button>\n+            )}\n+          </div>\n+        ) : (\n+          <div style={{\n+            width: '80px',\n+            height: '80px',\n+            background: day.isFuture ? 'linear-gradient(135deg, #f8f0e6 0%, #ede3d5 100%)' : 'linear-gradient(135deg, #f0e8de 0%, #e5dbc9 100%)',\n+            border: day.isFuture ? '2px dashed #d0c4b0' : '2px dashed #b8a896',\n+            borderRadius: '6px',\n+            display: 'flex',\n+            alignItems: 'center',\n+            justifyContent: 'center',\n+            fontSize: '11px',\n+            color: '#999',\n+            fontStyle: 'italic',\n+            textAlign: 'center',\n+            padding: '0.5rem'\n+          }}>\n+            {isGenerating ? '...' : '?'}\n+          </div>\n+        )}\n+      </div>\n+\n+      <div style={{ flex: 1, minWidth: 0 }}>\n+        <div style={{\n+          fontSize: '14px',\n+          fontWeight: 600,\n+          color: day.isToday ? '#2c2c2c' : '#666',\n+          marginBottom: '0.25rem'\n+        }}>\n+          {day.isToday ? t('timeline.today') : formatDate(day.date, dateLocale)}\n+        </div>\n+        <div style={{\n+          fontSize: '13px',\n+          color: '#888',\n+          fontStyle: (!textContent && (day.isToday || !dayData?.comments?.length)) ? 'italic' : 'normal'\n+        }}>\n+          {description}\n+        </div>\n+      </div>\n+    </div>\n+  );\n+}\n+\n // @@@ Get all notes from all sessions (localStorage for guest, database for authenticated)\n async function getAllNotesFromSessions(isAuthenticated: boolean): Promise<string> {\n   const allText: string[] = [];\n@@ -245,21 +421,95 @@ async function getAllNotesFromSessions(isAuthenticated: boolean): Promise<string\n }\n \n // @@@ Timeline page - combines pictures and comments by date\n+const MAX_RECENT_FRIENDS = 6;\n+\n+const getInitialLetter = (name?: string, fallback: string = '?') => {\n+  if (!name) return fallback;\n+  const first = name.trim().charAt(0).toUpperCase();\n+  return first || fallback;\n+};\n+\n function TimelinePage({ isVisible, voiceConfigs, dateLocale }: { isVisible: boolean; voiceConfigs: Record<string, any>; dateLocale: string }) {\n   const { t } = useTranslation();\n   const { isAuthenticated } = useAuth();\n   const [starredComments, setStarredComments] = useState<Commentor[]>([]);\n   const [allCommentsByDate, setAllCommentsByDate] = useState<Map<string, Commentor[]>>(new Map());\n   const [textByDate, setTextByDate] = useState<Map<string, string>>(new Map());\n-  const [pictures, setPictures] = useState<Array<{ date: string; base64: string; full_base64?: string; prompt: string }>>([]);\n+  const [pictures, setPictures] = useState<TimelinePicture[]>([]);\n   const [generatingForDate, setGeneratingForDate] = useState<string | null>(null);\n-  const [viewingImage, setViewingImage] = useState<{ base64: string; full_base64?: string; prompt: string; date: string } | null>(null);\n+  const [viewingImage, setViewingImage] = useState<{ base64: string; full_base64?: string; prompt: string; date: string; origin?: 'self' | 'friend'; friendId?: number } | null>(null);\n   const [initialLoading, setInitialLoading] = useState(true);\n   const [loadingCommentsForDate, setLoadingCommentsForDate] = useState<string | null>(null);\n+  const [friends, setFriends] = useState<Friend[]>([]);\n+  const [selectedFriendId, setSelectedFriendId] = useState<number | null>(() => {\n+    if (typeof window === 'undefined') return null;\n+    const stored = localStorage.getItem(STORAGE_KEYS.SELECTED_FRIEND);\n+    if (!stored) return null;\n+    const parsed = Number(stored);\n+    return Number.isFinite(parsed) ? parsed : null;\n+  });\n+  const [recentFriendIds, setRecentFriendIds] = useState<number[]>(() => {\n+    if (typeof window === 'undefined') return [];\n+    try {\n+      const stored = localStorage.getItem(STORAGE_KEYS.RECENT_FRIENDS);\n+      if (!stored) return [];\n+      const parsed = JSON.parse(stored);\n+      if (Array.isArray(parsed)) {\n+        return parsed.filter(id => typeof id === 'number');\n+      }\n+      return [];\n+    } catch {\n+      return [];\n+    }\n+  });\n+  const [isFriendPickerOpen, setIsFriendPickerOpen] = useState(false);\n+  const [friendSearchTerm, setFriendSearchTerm] = useState('');\n+  const [friendPictures, setFriendPictures] = useState<TimelinePicture[]>([]);\n+  const [loadingFriends, setLoadingFriends] = useState(false);\n+  const [friendLoadError, setFriendLoadError] = useState<string | null>(null);\n+  const [friendTimelineError, setFriendTimelineError] = useState<string | null>(null);\n+  const [loadingFriendTimeline, setLoadingFriendTimeline] = useState(false);\n   const scrollContainerRef = useRef<HTMLDivElement | null>(null);\n+  const emptyTextMap = useMemo(() => new Map<string, string>(), []);\n+  const filteredFriends = useMemo(() => {\n+    const term = friendSearchTerm.trim().toLowerCase();\n+    if (!term) return friends;\n+    return friends.filter(friend =>\n+      friend.friend_name?.toLowerCase().includes(term) ||\n+      friend.friend_email?.toLowerCase().includes(term)\n+    );\n+  }, [friends, friendSearchTerm]);\n+  useEffect(() => {\n+    setRecentFriendIds(prev =>\n+      prev.filter(id => friends.some(friend => friend.friend_id === id))\n+    );\n+  }, [friends]);\n+  const selectedFriend = useMemo(\n+    () => friends.find(friend => friend.friend_id === selectedFriendId),\n+    [friends, selectedFriendId]\n+  );\n+  useEffect(() => {\n+    if (typeof window === 'undefined') return;\n+    localStorage.setItem(STORAGE_KEYS.RECENT_FRIENDS, JSON.stringify(recentFriendIds));\n+  }, [recentFriendIds]);\n+  const friendMap = useMemo(() => {\n+    const map = new Map<number, Friend>();\n+    friends.forEach(friend => map.set(friend.friend_id, friend));\n+    return map;\n+  }, [friends]);\n+  const orderedFriendIds = useMemo(() => {\n+    const ids = recentFriendIds.filter(id => friendMap.has(id));\n+    if (selectedFriendId && friendMap.has(selectedFriendId)) {\n+      return [selectedFriendId, ...ids.filter(id => id !== selectedFriendId)].slice(0, MAX_RECENT_FRIENDS);\n+    }\n+    return ids.slice(0, MAX_RECENT_FRIENDS);\n+  }, [recentFriendIds, selectedFriendId, friendMap]);\n+  const orderedRecentFriends = orderedFriendIds\n+    .map(id => friendMap.get(id))\n+    .filter((friend): friend is Friend => Boolean(friend));\n \n   useEffect(() => {\n-    const loadData = async () => {\n+    const loadTimelineData = async () => {\n       // @@@ Load all comments grouped by date from database if authenticated, localStorage if guest\n       if (isAuthenticated) {\n         try {\n@@ -391,11 +641,53 @@ function TimelinePage({ isVisible, voiceConfigs, dateLocale }: { isVisible: bool\n       setInitialLoading(false);\n     };\n \n-    loadData();\n+    const loadFriendsList = async () => {\n+      if (!isAuthenticated) {\n+        setFriends([]);\n+        setFriendLoadError(null);\n+        setFriendPictures([]);\n+        setSelectedFriendId(null);\n+        setFriendTimelineError(null);\n+        setLoadingFriendTimeline(false);\n+        setIsFriendPickerOpen(false);\n+        setFriendSearchTerm('');\n+        if (typeof window !== 'undefined') {\n+          localStorage.removeItem(STORAGE_KEYS.SELECTED_FRIEND);\n+        }\n+        return;\n+      }\n+\n+      setLoadingFriends(true);\n+      setFriendLoadError(null);\n+      try {\n+        const { getFriends } = await import('../api/voiceApi');\n+        const friendList = await getFriends();\n+        setFriends(friendList);\n+        setSelectedFriendId(prev => {\n+          if (!prev) return prev;\n+          const exists = friendList.some(friend => friend.friend_id === prev);\n+          if (!exists) {\n+            if (typeof window !== 'undefined') {\n+              localStorage.removeItem(STORAGE_KEYS.SELECTED_FRIEND);\n+            }\n+            return null;\n+          }\n+          return prev;\n+        });\n+      } catch (err) {\n+        console.error('Failed to load friends:', err);\n+        setFriendLoadError(err instanceof Error ? err.message : String(err));\n+      } finally {\n+        setLoadingFriends(false);\n+      }\n+    };\n+\n+    loadTimelineData();\n+    loadFriendsList();\n   }, [isAuthenticated]);\n \n   // @@@ Group items by date (using YYYY-MM-DD format to match timeline days)\n-  const timelineByDate = new Map<string, { picture?: any; comments: Commentor[] }>();\n+  const timelineByDate = new Map<string, TimelineEntryData>();\n \n   starredComments.forEach(comment => {\n     const commentDate = new Date(comment.appliedAt || comment.computedAt);\n@@ -414,6 +706,54 @@ function TimelinePage({ isVisible, voiceConfigs, dateLocale }: { isVisible: bool\n     timelineByDate.get(date)!.picture = pic;\n   });\n \n+  const friendTimelineByDate = new Map<string, TimelineEntryData>();\n+  friendPictures.forEach(pic => {\n+    friendTimelineByDate.set(pic.date, { picture: pic, comments: [] });\n+  });\n+\n+  useEffect(() => {\n+    if (!isAuthenticated || !selectedFriendId) {\n+      setFriendPictures([]);\n+      setFriendTimelineError(null);\n+      setLoadingFriendTimeline(false);\n+      return;\n+    }\n+\n+    let cancelled = false;\n+    const loadFriendTimeline = async () => {\n+      setLoadingFriendTimeline(true);\n+      setFriendTimelineError(null);\n+      try {\n+        const { getFriendTimeline } = await import('../api/voiceApi');\n+        const friendData = await getFriendTimeline(selectedFriendId, 30);\n+        const normalized: TimelinePicture[] = friendData.map((pic: any) => ({\n+          date: pic.date,\n+          base64: pic.base64,\n+          prompt: pic.prompt || '',\n+          full_base64: pic.full_base64\n+        }));\n+        if (!cancelled) {\n+          setFriendPictures(normalized);\n+        }\n+      } catch (err) {\n+        if (!cancelled) {\n+          console.error('Failed to load friend timeline:', err);\n+          setFriendTimelineError(err instanceof Error ? err.message : String(err));\n+          setFriendPictures([]);\n+        }\n+      } finally {\n+        if (!cancelled) {\n+          setLoadingFriendTimeline(false);\n+        }\n+      }\n+    };\n+\n+    loadFriendTimeline();\n+    return () => {\n+      cancelled = true;\n+    };\n+  }, [isAuthenticated, selectedFriendId]);\n+\n   // @@@ Set initial scroll position to show today's row at top\n   // Use useLayoutEffect to position BEFORE browser paints (prevents flash)\n   useLayoutEffect(() => {\n@@ -482,8 +822,8 @@ function TimelinePage({ isVisible, voiceConfigs, dateLocale }: { isVisible: bool\n     }\n   };\n \n-  const handleImageClick = async (picture: { base64: string; full_base64?: string; prompt: string; date: string }) => {\n-    setViewingImage(picture);\n+  const handleImageClick = async (picture: TimelinePicture) => {\n+    setViewingImage({ ...picture, origin: 'self' });\n \n     // Load full image on-demand if not already loaded\n     if (!picture.full_base64 && isAuthenticated) {\n@@ -492,7 +832,7 @@ function TimelinePage({ isVisible, voiceConfigs, dateLocale }: { isVisible: bool\n         const fullImage = await getDailyPictureFull(picture.date);\n \n         // Update the picture object with full image\n-        const updatedPicture = { ...picture, full_base64: fullImage };\n+        const updatedPicture = { ...picture, full_base64: fullImage, origin: 'self' as const };\n         setViewingImage(updatedPicture);\n \n         // Also update pictures array so we don't reload next time\n@@ -507,6 +847,43 @@ function TimelinePage({ isVisible, voiceConfigs, dateLocale }: { isVisible: bool\n     await reloadCommentsForDate(picture.date);\n   };\n \n+  const handleFriendImageClick = async (picture: TimelinePicture) => {\n+    setViewingImage({ ...picture, origin: 'friend' });\n+\n+    if (!picture.full_base64 && selectedFriendId) {\n+      try {\n+        const { getFriendPictureFull } = await import('../api/voiceApi');\n+        const fullImage = await getFriendPictureFull(selectedFriendId, picture.date);\n+        const updatedPicture = { ...picture, full_base64: fullImage };\n+        setViewingImage({ ...updatedPicture, origin: 'friend' });\n+        setFriendPictures(prev => prev.map(p =>\n+          p.date === picture.date ? updatedPicture : p\n+        ));\n+      } catch (error) {\n+        console.error('Failed to load friend full image:', error);\n+      }\n+    }\n+  };\n+\n+  const handleFriendSelection = (friendId: number | null) => {\n+    setSelectedFriendId(friendId);\n+    if (typeof window !== 'undefined') {\n+      if (friendId) {\n+        localStorage.setItem(STORAGE_KEYS.SELECTED_FRIEND, String(friendId));\n+      } else {\n+        localStorage.removeItem(STORAGE_KEYS.SELECTED_FRIEND);\n+      }\n+    }\n+    if (friendId) {\n+      setRecentFriendIds(prev => {\n+        const without = prev.filter(id => id !== friendId);\n+        return [friendId, ...without].slice(0, MAX_RECENT_FRIENDS);\n+      });\n+    }\n+    setFriendSearchTerm('');\n+    setIsFriendPickerOpen(false);\n+  };\n+\n   const handleGenerateForDate = async (dateStr: string) => {\n     // @@@ Block image generation for guests\n     if (!isAuthenticated) {\n@@ -570,52 +947,273 @@ function TimelinePage({ isVisible, voiceConfigs, dateLocale }: { isVisible: bool\n         overflowY: 'auto',\n         display: 'flex',\n         flexDirection: 'column',\n+        alignItems: 'center'\n+      }}>\n+      <div style={{\n+        position: 'fixed',\n+        right: '1rem',\n+        top: '160px',\n+        display: 'flex',\n+        flexDirection: 'column',\n+        gap: '0.4rem',\n         alignItems: 'center',\n-        padding: '3rem 0',\n-        paddingBottom: '3rem'\n+        zIndex: 4,\n+        pointerEvents: isFriendPickerOpen ? 'none' : 'auto',\n+        opacity: isFriendPickerOpen ? 0.4 : 1\n       }}>\n+        <button\n+          onClick={() => handleFriendSelection(null)}\n+          style={{\n+            width: '42px',\n+            height: '42px',\n+            borderRadius: '21px',\n+            border: selectedFriendId === null ? '2px solid #2c2c2c' : '1px solid #d0c4b0',\n+            background: selectedFriendId === null ? '#2c2c2c' : '#fff',\n+            color: selectedFriendId === null ? '#fff' : '#4a433a',\n+            fontSize: '12px',\n+            fontWeight: 600,\n+            cursor: 'pointer'\n+          }}\n+          title={t('timeline.friendSelector.personal') || 'You'}\n+        >\n+          {t('timeline.friendSelector.personal') || 'Me'}\n+        </button>\n+        {orderedRecentFriends.map(friend => {\n+          const isActive = friend.friend_id === selectedFriendId;\n+          return (\n+            <button\n+              key={friend.id}\n+              onClick={() => handleFriendSelection(friend.friend_id)}\n+              style={{\n+                width: '42px',\n+                height: '42px',\n+                borderRadius: '21px',\n+                border: isActive ? '2px solid #2c2c2c' : '1px solid #d0c4b0',\n+                background: isActive ? '#2c2c2c' : '#fff',\n+                color: isActive ? '#fff' : '#4a433a',\n+                fontSize: '13px',\n+                fontWeight: 600,\n+                cursor: 'pointer'\n+              }}\n+              title={friend.friend_name || friend.friend_email}\n+            >\n+              {getInitialLetter(friend.friend_name, getInitialLetter(friend.friend_email))}\n+            </button>\n+          );\n+        })}\n+        <button\n+          onClick={() => {\n+            setFriendSearchTerm('');\n+            setIsFriendPickerOpen(true);\n+          }}\n+          style={{\n+            width: '42px',\n+            height: '42px',\n+            borderRadius: '21px',\n+            border: '1px solid #d0c4b0',\n+            background: '#fff',\n+            color: '#4a433a',\n+            fontSize: '18px',\n+            cursor: 'pointer'\n+          }}\n+          title={t('timeline.friendSelector.more') || 'More'}\n+        >\n+          â€¦\n+        </button>\n+      </div>\n+\n+      {isFriendPickerOpen && (\n+        <div\n+          style={{\n+            position: 'fixed',\n+            inset: 0,\n+            background: 'rgba(0, 0, 0, 0.45)',\n+            display: 'flex',\n+            alignItems: 'center',\n+            justifyContent: 'center',\n+            zIndex: 20,\n+            padding: '2rem'\n+          }}\n+          onClick={() => setIsFriendPickerOpen(false)}\n+        >\n+          <div\n+            style={{\n+              width: '100%',\n+              maxWidth: '420px',\n+              background: '#fff',\n+              borderRadius: '12px',\n+              border: '1px solid #d0c4b0',\n+              boxShadow: '0 12px 40px rgba(0,0,0,0.25)',\n+              padding: '1.5rem',\n+              display: 'flex',\n+              flexDirection: 'column',\n+              gap: '1rem'\n+            }}\n+            onClick={(e) => e.stopPropagation()}\n+          >\n+            <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>\n+              <div style={{ fontSize: '15px', fontWeight: 600, color: '#2c2c2c' }}>\n+                {t('timeline.friendSelector.label')}\n+              </div>\n+              <button\n+                onClick={() => setIsFriendPickerOpen(false)}\n+                style={{\n+                  border: 'none',\n+                  background: 'transparent',\n+                  fontSize: '14px',\n+                  color: '#7a7060',\n+                  cursor: 'pointer'\n+                }}\n+              >\n+                {t('timeline.friendSelector.close')}\n+              </button>\n+            </div>\n+            {friendLoadError && (\n+              <div style={{ fontSize: '12px', color: '#b8562e' }}>\n+                {t('timeline.friendSelector.error')}\n+              </div>\n+            )}\n+            <input\n+              type=\"text\"\n+              value={friendSearchTerm}\n+              onChange={(e) => setFriendSearchTerm(e.target.value)}\n+              placeholder={t('timeline.friendSelector.searchPlaceholder') || 'Search'}\n+              style={{\n+                width: '100%',\n+                padding: '0.65rem 0.85rem',\n+                borderRadius: '8px',\n+                border: '1px solid #c7b9a4',\n+                background: '#fff',\n+                fontSize: '14px',\n+                boxSizing: 'border-box'\n+              }}\n+            />\n+            <div style={{ display: 'flex', gap: '0.5rem' }}>\n+              <button\n+                onClick={() => handleFriendSelection(null)}\n+                style={{\n+                  flex: 1,\n+                  border: '1px solid #c7b9a4',\n+                  background: '#f8f0e6',\n+                  borderRadius: '8px',\n+                  padding: '0.6rem 0.75rem',\n+                  fontSize: '13px',\n+                  cursor: 'pointer'\n+                }}\n+              >\n+                {t('timeline.friendSelector.none')}\n+              </button>\n+            </div>\n+            <div style={{ maxHeight: '260px', overflowY: 'auto', display: 'flex', flexDirection: 'column', gap: '0.5rem' }}>\n+              {friends.length === 0 && (\n+                <div style={{ fontSize: '13px', color: '#7a7060' }}>\n+                  {t('timeline.friendSelector.noFriends')}\n+                </div>\n+              )}\n+              {friends.length > 0 && filteredFriends.length === 0 && (\n+                <div style={{ fontSize: '13px', color: '#7a7060' }}>\n+                  {t('timeline.friendSelector.noMatches')}\n+                </div>\n+              )}\n+              {filteredFriends.map((friend) => {\n+                const isSelected = friend.friend_id === selectedFriendId;\n+                return (\n+                  <button\n+                    key={friend.id}\n+                    onClick={() => handleFriendSelection(friend.friend_id)}\n+                    style={{\n+                      border: isSelected ? '1px solid #2c2c2c' : '1px solid #d0c4b0',\n+                      borderRadius: '8px',\n+                      padding: '0.65rem 0.9rem',\n+                      textAlign: 'left',\n+                      cursor: 'pointer',\n+                      background: isSelected ? '#f0e8de' : '#fff'\n+                    }}\n+                  >\n+                    <div style={{ fontWeight: 600, fontSize: '14px', color: '#2c2c2c' }}>\n+                      {friend.friend_name}\n+                    </div>\n+                    <div style={{ fontSize: '12px', color: '#7a7060' }}>\n+                      {friend.friend_email}\n+                    </div>\n+                  </button>\n+                );\n+              })}\n+            </div>\n+          </div>\n+        </div>\n+      )}\n+\n       {/* @@@ Vertical scrolling timeline - rows stacked */}\n       <div style={{\n         display: 'flex',\n         flexDirection: 'column',\n         gap: '1.5rem',\n-        maxWidth: '900px',\n+        maxWidth: '1200px',\n         width: '100%',\n         padding: '0 2rem',\n         paddingBottom: '5rem'  // @@@ Prevent bottom card cutoff\n       }}>\n         {allTimelineDays.map((day, index) => {\n           const dayData = timelineByDate.get(day.date);\n+          const friendDayData = friendTimelineByDate.get(day.date);\n           const hasData = !!dayData;\n+          const hasFriendData = !!friendDayData;\n           const isGenerating = generatingForDate === day.date;\n+          const placeholder = getPlaceholderText(t, day.daysOffset);\n+          const showFriendSide = Boolean(selectedFriendId);\n \n           return (\n             <div\n               key={day.date}\n               style={{\n                 position: 'relative',\n-                paddingLeft: '3rem'\n+                display: 'flex',\n+                alignItems: 'center',\n+                justifyContent: 'center',\n+                gap: '1.5rem',\n+                padding: '0 2rem'\n               }}>\n-              {/* @@@ Fixed timeline node - does NOT move with card hover */}\n+              <div style={{\n+                flex: '1',\n+                display: 'flex',\n+                justifyContent: 'flex-end',\n+                paddingRight: '2rem'\n+              }}>\n+                {renderTimelineCard({\n+                  day,\n+                  dayData,\n+                  hasData,\n+                  isGenerating,\n+                  onImageClick: handleImageClick,\n+                  onGenerate: handleGenerateForDate,\n+                  textByDate,\n+                  t,\n+                  dateLocale,\n+                  placeholder\n+                })}\n+              </div>\n+\n+              {/* Center node */}\n               <div style={{\n                 position: 'absolute',\n-                left: '0',\n+                left: '50%',\n                 top: '50%',\n-                transform: 'translateY(-50%)',\n+                transform: 'translate(-50%, -50%)',\n                 width: '20px',\n                 height: '20px',\n                 borderRadius: '50%',\n-                background: hasData ? '#4CAF50' : (day.isToday ? '#888' : '#ddd'),\n+                background: (hasData || hasFriendData) ? '#4CAF50' : (day.isToday ? '#888' : '#ddd'),\n                 border: '3px solid #f8f0e6',\n                 boxShadow: '0 2px 8px rgba(0,0,0,0.15)',\n-                zIndex: 2\n+                zIndex: 2,\n+                pointerEvents: 'none'\n               }} />\n \n-              {/* @@@ Fixed connecting line - does NOT move with card hover */}\n               {index < allTimelineDays.length - 1 && (\n                 <div style={{\n                   position: 'absolute',\n-                  left: '10.5px',\n+                  left: 'calc(50% - 1.5px)',\n                   top: '50%',\n                   height: 'calc(100% + 1.5rem)',\n                   width: '3px',\n@@ -624,133 +1222,31 @@ function TimelinePage({ isVisible, voiceConfigs, dateLocale }: { isVisible: bool\n                 }} />\n               )}\n \n-              {/* @@@ Movable card - slides right on hover */}\n-              <div\n-                onClick={() => {\n-                  if (dayData?.picture) {\n-                    handleImageClick(dayData.picture);\n-                  }\n-                  // @@@ Removed manual generation for today - now automatic only\n-                }}\n-                style={{\n-                  display: 'flex',\n-                  alignItems: 'center',\n-                  gap: '1rem',\n-                  background: '#fff',\n-                  border: '1px solid #d0c4b0',\n-                  borderRadius: '8px',\n-                  padding: '1rem',\n-                  cursor: dayData?.picture && !isGenerating ? 'pointer' : 'default',\n-                  transition: 'transform 0.2s, box-shadow 0.2s',\n-                  opacity: day.isPast && !hasData ? 0.4 : 1\n-                }}\n-                onMouseEnter={e => {\n-                  if (dayData?.picture && !isGenerating) {\n-                    e.currentTarget.style.transform = 'translateX(8px)';\n-                    e.currentTarget.style.boxShadow = '0 4px 12px rgba(0,0,0,0.1)';\n-                  }\n-                }}\n-                onMouseLeave={e => {\n-                  e.currentTarget.style.transform = 'translateX(0)';\n-                  e.currentTarget.style.boxShadow = 'none';\n-                }}\n-              >\n-                {/* @@@ Small 80x80 image thumbnail */}\n-                <div style={{ flexShrink: 0 }}>\n-                  {dayData?.picture ? (\n-                    <div style={{ position: 'relative' }}>\n-                      <img\n-                        src={`data:image/${dayData.picture.base64?.startsWith('iVBOR') ? 'png' : 'jpeg'};base64,${dayData.picture.base64}`}\n-                        alt={dayData.picture.prompt}\n-                        style={{\n-                          width: '80px',\n-                          height: '80px',\n-                          objectFit: 'cover',\n-                          borderRadius: '6px'\n-                        }}\n-                      />\n-                      {/* Redraw button */}\n-                      <button\n-                        onClick={(e) => {\n-                          e.stopPropagation();\n-                          if (!isGenerating) handleGenerateForDate(day.date);\n-                        }}\n-                        disabled={isGenerating}\n-                        style={{\n-                          position: 'absolute',\n-                          top: '4px',\n-                          right: '4px',\n-                          width: '24px',\n-                          height: '24px',\n-                          borderRadius: '50%',\n-                          background: 'rgba(255, 255, 255, 0.95)',\n-                          border: 'none',\n-                          cursor: isGenerating ? 'wait' : 'pointer',\n-                          display: 'flex',\n-                          alignItems: 'center',\n-                          justifyContent: 'center',\n-                          opacity: 0.9,\n-                          transition: 'opacity 0.2s'\n-                        }}\n-                        onMouseEnter={e => {\n-                          if (!isGenerating) e.currentTarget.style.opacity = '1';\n-                        }}\n-                        onMouseLeave={e => {\n-                          e.currentTarget.style.opacity = '0.9';\n-                        }}\n-                        title=\"Redraw image\"\n-                      >\n-                        <svg width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n-                          <path d=\"M21.5 2v6h-6M2.5 22v-6h6M2 11.5a10 10 0 0 1 18.8-4.3M22 12.5a10 10 0 0 1-18.8 4.2\"/>\n-                        </svg>\n-                      </button>\n-                    </div>\n-                  ) : (\n-                    <div style={{\n-                      width: '80px',\n-                      height: '80px',\n-                      background: day.isFuture ? 'linear-gradient(135deg, #f8f0e6 0%, #ede3d5 100%)' : 'linear-gradient(135deg, #f0e8de 0%, #e5dbc9 100%)',\n-                      border: day.isFuture ? '2px dashed #d0c4b0' : '2px dashed #b8a896',\n-                      borderRadius: '6px',\n-                      display: 'flex',\n-                      alignItems: 'center',\n-                      justifyContent: 'center',\n-                      fontSize: '11px',\n-                      color: '#999',\n-                      fontStyle: 'italic',\n-                      textAlign: 'center',\n-                      padding: '0.5rem'\n-                    }}>\n-                      {isGenerating ? '...' : '?'}\n-                    </div>\n-                  )}\n-                </div>\n-\n-                {/* @@@ Text content - date + summary */}\n-                <div style={{ flex: 1, minWidth: 0 }}>\n-                  <div style={{\n-                    fontSize: '14px',\n-                    fontWeight: 600,\n-                    color: day.isToday ? '#2c2c2c' : '#666',\n-                    marginBottom: '0.25rem'\n-                  }}>\n-                    {day.isToday ? t('timeline.today') : formatDate(day.date, dateLocale)}\n-                  </div>\n-                  <div style={{\n-                    fontSize: '13px',\n-                    color: '#888',\n-                    fontStyle: (day.isToday && !dayData?.picture) || (!textByDate.get(day.date) && !dayData?.comments?.length) ? 'italic' : 'normal'\n-                  }}>\n-                    {isGenerating ? t('timeline.generating') :\n-                     day.isToday && !dayData?.picture ?\n-                       getPlaceholderText(t, day.daysOffset) :\n-                     textByDate.get(day.date) ?\n-                       getTextPreview(textByDate.get(day.date)!) :\n-                     dayData?.comments?.length ?\n-                       t('timeline.entryCount', { count: dayData.comments.length }) :\n-                       getPlaceholderText(t, day.daysOffset)}\n-                  </div>\n-                </div>\n+              <div style={{\n+                flex: '1',\n+                display: 'flex',\n+                justifyContent: 'flex-start',\n+                paddingLeft: '2rem'\n+              }}>\n+                {showFriendSide && friendDayData?.picture ? (\n+                  renderTimelineCard({\n+                    day,\n+                    dayData: friendDayData,\n+                    hasData: true,\n+                    isGenerating: false,\n+                    onImageClick: handleFriendImageClick,\n+                    textByDate: emptyTextMap,\n+                    t,\n+                    dateLocale,\n+                    placeholder,\n+                    readOnly: true,\n+                    customDescription: friendDayData.picture.prompt\n+                      ? getTextPreview(friendDayData.picture.prompt, 80)\n+                      : placeholder\n+                  })\n+                ) : (\n+                  <div style={{ width: '80px', height: '80px' }} />\n+                )}\n               </div>\n             </div>\n           );\n@@ -935,6 +1431,47 @@ function TimelinePage({ isVisible, voiceConfigs, dateLocale }: { isVisible: bool\n                     }\n \n                     if (commentsToDisplay.length === 0) {\n+                      if (viewingImage.origin === 'friend' && viewingImage.prompt) {\n+                        return (\n+                          <div style={{\n+                            display: 'flex',\n+                            flexDirection: 'column',\n+                            gap: '1rem'\n+                          }}>\n+                            <div\n+                              style={{\n+                                background: '#fff',\n+                                border: '1px solid #e0d8cc',\n+                                borderRadius: '8px',\n+                                padding: '1rem'\n+                              }}\n+                            >\n+                              <div style={{\n+                                display: 'flex',\n+                                alignItems: 'center',\n+                                gap: '0.5rem',\n+                                marginBottom: '0.75rem'\n+                              }}>\n+                                <span style={{ fontSize: '18px' }}>ðŸ‘¥</span>\n+                                <span style={{ fontWeight: 600, fontSize: '14px', color: '#333' }}>\n+                                  {t('timeline.friendTimeline.readOnlyShort')}\n+                                </span>\n+                              </div>\n+                              <div style={{\n+                                fontSize: '13px',\n+                                color: '#555',\n+                                lineHeight: '1.7',\n+                                paddingLeft: '0.5rem',\n+                                wordBreak: 'break-word',\n+                                whiteSpace: 'pre-wrap'\n+                              }}>\n+                                {viewingImage.prompt}\n+                              </div>\n+                            </div>\n+                          </div>\n+                        );\n+                      }\n+\n                       return (\n                         <div style={{\n                           textAlign: 'center',\n@@ -1042,11 +1579,10 @@ function TimelinePage({ isVisible, voiceConfigs, dateLocale }: { isVisible: bool\n                 color: '#888'\n               }}>\n                 {(() => {\n-                  const dateData = Array.from(timelineByDate.entries()).find(([_, data]) =>\n-                    data.picture?.base64 === viewingImage.base64\n-                  );\n-                  const commentCount = dateData?.[1]?.comments?.length || 0;\n-                  return `${commentCount} ${commentCount === 1 ? 'entry' : 'entries'}`;\n+                  const commentCount = viewingImage.origin === 'friend'\n+                    ? (viewingImage.prompt ? 1 : 0)\n+                    : (timelineByDate.get(viewingImage.date)?.comments?.length || 0);\n+                  return t('timeline.entryCount', { count: commentCount });\n                 })()}\n               </div>\n             </div>\n@@ -1056,5 +1592,3 @@ function TimelinePage({ isVisible, voiceConfigs, dateLocale }: { isVisible: bool\n     </div>\n   );\n }\n-\n-// @@@ Analysis Page (placeholder for echoes/traits/patterns)"
    },
    {
      "sha": "8d51fb7aee285820777870a365baedefbf711b59",
      "filename": "frontend/src/constants/storageKeys.ts",
      "status": "modified",
      "additions": 2,
      "deletions": 0,
      "changes": 2,
      "blob_url": "https://github.com/shuxueshuxue/ink-and-memory/blob/d174b45cd7e94458f9251a2993e479e54188a260/frontend%2Fsrc%2Fconstants%2FstorageKeys.ts",
      "raw_url": "https://github.com/shuxueshuxue/ink-and-memory/raw/d174b45cd7e94458f9251a2993e479e54188a260/frontend%2Fsrc%2Fconstants%2FstorageKeys.ts",
      "contents_url": "https://api.github.com/repos/shuxueshuxue/ink-and-memory/contents/frontend%2Fsrc%2Fconstants%2FstorageKeys.ts?ref=d174b45cd7e94458f9251a2993e479e54188a260",
      "patch": "@@ -22,6 +22,8 @@ export const STORAGE_KEYS = {\n   // Calendar & Pictures\n   CALENDAR_ENTRIES: 'calendarEntries',\n   DAILY_PICTURES: 'daily-pictures',\n+  SELECTED_FRIEND: 'ink-selected-friend',\n+  RECENT_FRIENDS: 'ink-recent-friends',\n \n   // Analysis\n   ANALYSIS_REPORTS: 'analysisReports'"
    },
    {
      "sha": "29abb7e295d3890a76574dc5cac581d06ff25de9",
      "filename": "frontend/src/i18n.ts",
      "status": "modified",
      "additions": 48,
      "deletions": 2,
      "changes": 50,
      "blob_url": "https://github.com/shuxueshuxue/ink-and-memory/blob/d174b45cd7e94458f9251a2993e479e54188a260/frontend%2Fsrc%2Fi18n.ts",
      "raw_url": "https://github.com/shuxueshuxue/ink-and-memory/raw/d174b45cd7e94458f9251a2993e479e54188a260/frontend%2Fsrc%2Fi18n.ts",
      "contents_url": "https://api.github.com/repos/shuxueshuxue/ink-and-memory/contents/frontend%2Fsrc%2Fi18n.ts?ref=d174b45cd7e94458f9251a2993e479e54188a260",
      "patch": "@@ -125,7 +125,30 @@ const resources = {\n         today: 'Today',\n         generating: 'Generating...',\n         entryCount_one: '{{count}} entry',\n-        entryCount_other: '{{count}} entries'\n+        entryCount_other: '{{count}} entries',\n+        friendSelector: {\n+          label: 'View Timeline',\n+          placeholder: 'Choose a friend',\n+          none: 'No friend selected',\n+          loading: 'Loading friends...',\n+          error: 'Could not load friends',\n+          button: 'Timeline settings',\n+          summarySolo: 'Personal timeline only',\n+          summaryWithFriend: 'Comparing with {{name}}',\n+          searchPlaceholder: 'Search friends',\n+          noFriends: 'You have no friends yet.',\n+          noMatches: 'No matches found',\n+          close: 'Close',\n+          personal: 'You',\n+          more: 'More'\n+        },\n+        friendTimeline: {\n+          loading: 'Loading friend timeline...',\n+          empty: 'This friend has no entries yet.',\n+          error: 'Unable to load friend timeline.',\n+          readOnly: \"Friend reflections open in read-only mode. You're just viewing their day.\",\n+          readOnlyShort: 'Friend timeline preview'\n+        }\n       },\n       timelinePlaceholders: {\n         today: 'Generates automatically overnight',\n@@ -310,7 +333,30 @@ const resources = {\n         today: 'ä»Šå¤©',\n         generating: 'ç”Ÿæˆä¸­...',\n         entryCount_one: '{{count}} æ¡è®°å½•',\n-        entryCount_other: '{{count}} æ¡è®°å½•'\n+        entryCount_other: '{{count}} æ¡è®°å½•',\n+        friendSelector: {\n+          label: 'æŸ¥çœ‹æ—¶é—´çº¿',\n+          placeholder: 'é€‰æ‹©å¥½å‹',\n+          none: 'ä¸æŸ¥çœ‹å¥½å‹',\n+          loading: 'æ­£åœ¨åŠ è½½å¥½å‹...',\n+          error: 'æ— æ³•åŠ è½½å¥½å‹åˆ—è¡¨',\n+          button: 'æ—¶é—´çº¿è®¾ç½®',\n+          summarySolo: 'å½“å‰ä»…æ˜¾ç¤ºä¸ªäººæ—¶é—´çº¿',\n+          summaryWithFriend: 'æ­£åœ¨ä¸Ž {{name}} çš„æ—¶é—´çº¿å¯¹ç…§',\n+          searchPlaceholder: 'æœç´¢å¥½å‹',\n+          noFriends: 'ä½ è¿˜æ²¡æœ‰å¥½å‹ã€‚',\n+          noMatches: 'æ²¡æœ‰ç¬¦åˆæ¡ä»¶çš„å¥½å‹',\n+          close: 'å…³é—­',\n+          personal: 'ä»…è‡ªå·±',\n+          more: 'æ›´å¤š'\n+        },\n+        friendTimeline: {\n+          loading: 'æ­£åœ¨åŠ è½½å¥½å‹æ—¶é—´çº¿...',\n+          empty: 'è¿™ä½å¥½å‹æœ€è¿‘æ²¡æœ‰è®°å½•ã€‚',\n+          error: 'æ— æ³•åŠ è½½å¥½å‹çš„æ—¶é—´çº¿ã€‚',\n+          readOnly: 'å¥½å‹çš„æ€»ç»“ä»…ä¾›æŸ¥çœ‹ï¼Œæ— æ³•äº’åŠ¨ã€‚',\n+          readOnlyShort: 'å¥½å‹æ—¶é—´çº¿é¢„è§ˆ'\n+        }\n       },\n       timelinePlaceholders: {\n         today: 'å¤œé‡Œè‡ªåŠ¨ç”Ÿæˆä½ çš„æ—¶é—´çº¿',"
    }
  ]
}