{
  "sha": "22492fb9d5f37ce2e08097ef921cfc77d8a3437a",
  "node_id": "C_kwDOP2Zrm9oAKDIyNDkyZmI5ZDVmMzdjZTJlMDgwOTdlZjkyMWNmYzc3ZDhhMzQzN2E",
  "commit": {
    "author": {
      "name": "lexicalmathical",
      "email": "lexicalmathical@gmail.com",
      "date": "2025-11-02T07:14:34Z"
    },
    "committer": {
      "name": "lexicalmathical",
      "email": "lexicalmathical@gmail.com",
      "date": "2025-11-02T07:14:34Z"
    },
    "message": "Refactor localStorage keys to use centralized constants\n\n- Created src/constants/storageKeys.ts with all storage key constants\n- Replaced all magic string localStorage keys across 8 files:\n  * AuthContext.tsx (6 instances)\n  * App.tsx (multiple instances for all state management)\n  * voiceApi.ts (1 instance)\n  * voiceStorage.ts (6 instances)\n  * calendarStorage.ts (2 instances)\n  * CollectionsView.tsx (4 instances)\n  * AnalysisView.tsx (2 instances)\n  * EditorEngine.ts (1 instance)\n\nBenefits:\n- Single source of truth for all storage keys\n- Type safety with const assertion\n- Easy to refactor/rename keys\n- Prevents typos in storage key names\n- Better IDE autocomplete support\n\nðŸ¤– Generated with [Claude Code](https://claude.com/claude-code)\n\nCo-Authored-By: Claude <noreply@anthropic.com>",
    "tree": {
      "sha": "c6b4147d696e3bfcf23cc19339008520550f7fcc",
      "url": "https://api.github.com/repos/shuxueshuxue/ink-and-memory/git/trees/c6b4147d696e3bfcf23cc19339008520550f7fcc"
    },
    "url": "https://api.github.com/repos/shuxueshuxue/ink-and-memory/git/commits/22492fb9d5f37ce2e08097ef921cfc77d8a3437a",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null,
      "verified_at": null
    }
  },
  "url": "https://api.github.com/repos/shuxueshuxue/ink-and-memory/commits/22492fb9d5f37ce2e08097ef921cfc77d8a3437a",
  "html_url": "https://github.com/shuxueshuxue/ink-and-memory/commit/22492fb9d5f37ce2e08097ef921cfc77d8a3437a",
  "comments_url": "https://api.github.com/repos/shuxueshuxue/ink-and-memory/commits/22492fb9d5f37ce2e08097ef921cfc77d8a3437a/comments",
  "author": null,
  "committer": null,
  "parents": [
    {
      "sha": "686157161fca772b3dd3a6854410944d4852e6ba",
      "url": "https://api.github.com/repos/shuxueshuxue/ink-and-memory/commits/686157161fca772b3dd3a6854410944d4852e6ba",
      "html_url": "https://github.com/shuxueshuxue/ink-and-memory/commit/686157161fca772b3dd3a6854410944d4852e6ba"
    }
  ],
  "stats": {
    "total": 145,
    "additions": 89,
    "deletions": 56
  },
  "files": [
    {
      "sha": "1606b8ad9d083497fa3d93a7c686f2910a836b2c",
      "filename": "frontend/src/App.tsx",
      "status": "modified",
      "additions": 27,
      "deletions": 26,
      "changes": 53,
      "blob_url": "https://github.com/shuxueshuxue/ink-and-memory/blob/22492fb9d5f37ce2e08097ef921cfc77d8a3437a/frontend%2Fsrc%2FApp.tsx",
      "raw_url": "https://github.com/shuxueshuxue/ink-and-memory/raw/22492fb9d5f37ce2e08097ef921cfc77d8a3437a/frontend%2Fsrc%2FApp.tsx",
      "contents_url": "https://api.github.com/repos/shuxueshuxue/ink-and-memory/contents/frontend%2Fsrc%2FApp.tsx?ref=22492fb9d5f37ce2e08097ef921cfc77d8a3437a",
      "patch": "@@ -29,6 +29,7 @@ import { findNormalizedPhrase } from './utils/textNormalize';\n import { useAuth } from './contexts/AuthContext';\n import LoginForm from './components/Auth/LoginForm';\n import RegisterForm from './components/Auth/RegisterForm';\n+import { STORAGE_KEYS } from './constants/storageKeys';\n \n // @@@ Left Toolbar Component - floating toolbelt within left margin\n function LeftToolbar({\n@@ -361,17 +362,17 @@ export default function App() {\n     if (isAuthenticated && !isLoading) {\n       // Check if user has localStorage data that needs migration\n       const hasLocalData =\n-        localStorage.getItem('ink_memory_state') ||\n-        localStorage.getItem('calendarEntries') ||\n-        localStorage.getItem('dailyPictures') ||\n-        localStorage.getItem('voice-configs') ||\n-        localStorage.getItem('meta-prompt') ||\n-        localStorage.getItem('state-config') ||\n-        localStorage.getItem('selected-state') ||\n-        localStorage.getItem('analysisReports');\n+        localStorage.getItem(STORAGE_KEYS.EDITOR_STATE) ||\n+        localStorage.getItem(STORAGE_KEYS.CALENDAR_ENTRIES) ||\n+        localStorage.getItem(STORAGE_KEYS.DAILY_PICTURES) ||\n+        localStorage.getItem(STORAGE_KEYS.VOICE_CONFIGS) ||\n+        localStorage.getItem(STORAGE_KEYS.META_PROMPT) ||\n+        localStorage.getItem(STORAGE_KEYS.STATE_CONFIG) ||\n+        localStorage.getItem(STORAGE_KEYS.SELECTED_STATE) ||\n+        localStorage.getItem(STORAGE_KEYS.ANALYSIS_REPORTS);\n \n       // Check if migration already done (flag stored after migration)\n-      const migrationDone = localStorage.getItem('migration_completed');\n+      const migrationDone = localStorage.getItem(STORAGE_KEYS.MIGRATION_COMPLETED);\n \n       if (hasLocalData && !migrationDone) {\n         setShowMigrationDialog(true);\n@@ -389,7 +390,7 @@ export default function App() {\n       setState({ ...newState });\n       // Only save to localStorage if not authenticated (guest mode)\n       if (!isAuthenticated) {\n-        localStorage.setItem('ink_memory_state', JSON.stringify(newState));\n+        localStorage.setItem(STORAGE_KEYS.EDITOR_STATE, JSON.stringify(newState));\n       }\n     });\n \n@@ -453,7 +454,7 @@ export default function App() {\n         }\n       } else {\n         // Load from localStorage for guest mode\n-        const saved = localStorage.getItem('ink_memory_state');\n+        const saved = localStorage.getItem(STORAGE_KEYS.EDITOR_STATE);\n         if (saved) {\n           try {\n             const parsed = JSON.parse(saved);\n@@ -474,7 +475,7 @@ export default function App() {\n         }\n \n         // @@@ Load selectedState from localStorage for guest mode\n-        const savedState = localStorage.getItem('selected-state');\n+        const savedState = localStorage.getItem(STORAGE_KEYS.SELECTED_STATE);\n         if (savedState) {\n           setSelectedState(savedState);\n         }\n@@ -843,8 +844,8 @@ export default function App() {\n       }\n     } else {\n       // For guest users: clear localStorage\n-      localStorage.removeItem('ink_memory_state');\n-      localStorage.removeItem('selected-state');\n+      localStorage.removeItem(STORAGE_KEYS.EDITOR_STATE);\n+      localStorage.removeItem(STORAGE_KEYS.SELECTED_STATE);\n     }\n \n     window.location.reload();\n@@ -904,7 +905,7 @@ export default function App() {\n         console.error('Failed to save state to database:', error);\n       }\n     } else {\n-      localStorage.setItem('selected-state', stateId);\n+      localStorage.setItem(STORAGE_KEYS.SELECTED_STATE, stateId);\n     }\n   }, [isAuthenticated]);\n \n@@ -980,14 +981,14 @@ export default function App() {\n     try {\n       // Export all localStorage data (convert null to undefined)\n       const migrationData = {\n-        currentSession: localStorage.getItem('ink_memory_state') ?? undefined,\n-        calendarEntries: localStorage.getItem('calendarEntries') ?? undefined,\n-        dailyPictures: localStorage.getItem('dailyPictures') ?? undefined,\n-        voiceCustomizations: localStorage.getItem('voice-configs') ?? undefined,\n-        metaPrompt: localStorage.getItem('meta-prompt') ?? undefined,\n-        stateConfig: localStorage.getItem('state-config') ?? undefined,\n-        selectedState: localStorage.getItem('selected-state') ?? undefined,\n-        analysisReports: localStorage.getItem('analysisReports') ?? undefined,\n+        currentSession: localStorage.getItem(STORAGE_KEYS.EDITOR_STATE) ?? undefined,\n+        calendarEntries: localStorage.getItem(STORAGE_KEYS.CALENDAR_ENTRIES) ?? undefined,\n+        dailyPictures: localStorage.getItem(STORAGE_KEYS.DAILY_PICTURES) ?? undefined,\n+        voiceCustomizations: localStorage.getItem(STORAGE_KEYS.VOICE_CONFIGS) ?? undefined,\n+        metaPrompt: localStorage.getItem(STORAGE_KEYS.META_PROMPT) ?? undefined,\n+        stateConfig: localStorage.getItem(STORAGE_KEYS.STATE_CONFIG) ?? undefined,\n+        selectedState: localStorage.getItem(STORAGE_KEYS.SELECTED_STATE) ?? undefined,\n+        analysisReports: localStorage.getItem(STORAGE_KEYS.ANALYSIS_REPORTS) ?? undefined,\n         oldDocument: localStorage.getItem('document') ?? undefined\n       };\n \n@@ -997,10 +998,10 @@ export default function App() {\n       console.log('âœ… Migration complete:', result.imported);\n \n       // Mark migration as complete\n-      localStorage.setItem('migration_completed', 'true');\n+      localStorage.setItem(STORAGE_KEYS.MIGRATION_COMPLETED, 'true');\n \n       // Clear old localStorage data (keep auth token and migration flag)\n-      const keysToKeep = ['auth_token', 'migration_completed'];\n+      const keysToKeep: string[] = [STORAGE_KEYS.AUTH_TOKEN, STORAGE_KEYS.MIGRATION_COMPLETED];\n       const allKeys = Object.keys(localStorage);\n       allKeys.forEach(key => {\n         if (!keysToKeep.includes(key)) {\n@@ -1021,7 +1022,7 @@ export default function App() {\n   }, []);\n \n   const handleSkipMigration = useCallback(() => {\n-    localStorage.setItem('migration_completed', 'true');\n+    localStorage.setItem(STORAGE_KEYS.MIGRATION_COMPLETED, 'true');\n     setShowMigrationDialog(false);\n   }, []);\n "
    },
    {
      "sha": "cedfb1496ffa16d02c23cd07d438ab782312126a",
      "filename": "frontend/src/api/voiceApi.ts",
      "status": "modified",
      "additions": 3,
      "deletions": 1,
      "changes": 4,
      "blob_url": "https://github.com/shuxueshuxue/ink-and-memory/blob/22492fb9d5f37ce2e08097ef921cfc77d8a3437a/frontend%2Fsrc%2Fapi%2FvoiceApi.ts",
      "raw_url": "https://github.com/shuxueshuxue/ink-and-memory/raw/22492fb9d5f37ce2e08097ef921cfc77d8a3437a/frontend%2Fsrc%2Fapi%2FvoiceApi.ts",
      "contents_url": "https://api.github.com/repos/shuxueshuxue/ink-and-memory/contents/frontend%2Fsrc%2Fapi%2FvoiceApi.ts?ref=22492fb9d5f37ce2e08097ef921cfc77d8a3437a",
      "patch": "@@ -2,14 +2,16 @@\n  * API client for voice analysis backend - FastAPI sync API version\n  */\n \n+import { STORAGE_KEYS } from '../constants/storageKeys';\n+\n // nginx proxies /ink-and-memory/api/* to backend (8765)\n const API_BASE = '/ink-and-memory';\n \n /**\n  * Get auth headers for authenticated requests\n  */\n function getAuthHeaders(): HeadersInit {\n-  const token = localStorage.getItem('auth_token');\n+  const token = localStorage.getItem(STORAGE_KEYS.AUTH_TOKEN);\n   if (!token) {\n     throw new Error('Not authenticated');\n   }"
    },
    {
      "sha": "49d23bbcd4af6f9c75542ab5df2e56532ca5f6b8",
      "filename": "frontend/src/components/AnalysisView.tsx",
      "status": "modified",
      "additions": 3,
      "deletions": 3,
      "changes": 6,
      "blob_url": "https://github.com/shuxueshuxue/ink-and-memory/blob/22492fb9d5f37ce2e08097ef921cfc77d8a3437a/frontend%2Fsrc%2Fcomponents%2FAnalysisView.tsx",
      "raw_url": "https://github.com/shuxueshuxue/ink-and-memory/raw/22492fb9d5f37ce2e08097ef921cfc77d8a3437a/frontend%2Fsrc%2Fcomponents%2FAnalysisView.tsx",
      "contents_url": "https://api.github.com/repos/shuxueshuxue/ink-and-memory/contents/frontend%2Fsrc%2Fcomponents%2FAnalysisView.tsx?ref=22492fb9d5f37ce2e08097ef921cfc77d8a3437a",
      "patch": "@@ -3,10 +3,10 @@ import { getCalendarData } from '../utils/calendarStorage';\n import { analyzeEchoes, analyzeTraits, analyzePatterns, saveAnalysisReport, getAnalysisReports } from '../api/voiceApi';\n import type { TextCell } from '../engine/EditorEngine';\n import { useAuth } from '../contexts/AuthContext';\n+import { STORAGE_KEYS } from '../constants/storageKeys';\n \n // @@@ Constants\n const MAX_SAVED_REPORTS = 10;\n-const LOCALSTORAGE_KEY = 'analysis-reports-history';\n \n // @@@ Utility Functions\n \n@@ -147,7 +147,7 @@ export default function AnalysisView() {\n         }\n       } else {\n         // Guest mode: load from localStorage\n-        const savedReportsData = localStorage.getItem(LOCALSTORAGE_KEY);\n+        const savedReportsData = localStorage.getItem(STORAGE_KEYS.ANALYSIS_REPORTS);\n         if (savedReportsData) {\n           try {\n             const reports = JSON.parse(savedReportsData);\n@@ -273,7 +273,7 @@ export default function AnalysisView() {\n       // Guest mode: save to localStorage\n       const updatedReports = [newReport, ...savedReports];\n       const limitedReports = updatedReports.slice(0, MAX_SAVED_REPORTS);\n-      localStorage.setItem(LOCALSTORAGE_KEY, JSON.stringify(limitedReports));\n+      localStorage.setItem(STORAGE_KEYS.ANALYSIS_REPORTS, JSON.stringify(limitedReports));\n       setSavedReports(limitedReports);\n     }\n "
    },
    {
      "sha": "afb73b6365869e65396b4c3deb8657ea76bc7b3c",
      "filename": "frontend/src/components/CollectionsView.tsx",
      "status": "modified",
      "additions": 5,
      "deletions": 4,
      "changes": 9,
      "blob_url": "https://github.com/shuxueshuxue/ink-and-memory/blob/22492fb9d5f37ce2e08097ef921cfc77d8a3437a/frontend%2Fsrc%2Fcomponents%2FCollectionsView.tsx",
      "raw_url": "https://github.com/shuxueshuxue/ink-and-memory/raw/22492fb9d5f37ce2e08097ef921cfc77d8a3437a/frontend%2Fsrc%2Fcomponents%2FCollectionsView.tsx",
      "contents_url": "https://api.github.com/repos/shuxueshuxue/ink-and-memory/contents/frontend%2Fsrc%2Fcomponents%2FCollectionsView.tsx?ref=22492fb9d5f37ce2e08097ef921cfc77d8a3437a",
      "patch": "@@ -2,6 +2,7 @@ import { useState, useEffect, useLayoutEffect, useRef } from 'react';\n import type { Commentor } from '../engine/EditorEngine';\n import { findNormalizedPhrase } from '../utils/textNormalize';\n import { useAuth } from '../contexts/AuthContext';\n+import { STORAGE_KEYS } from '../constants/storageKeys';\n \n // @@@ TypeScript interfaces\n interface TimelineDay {\n@@ -189,7 +190,7 @@ async function getAllNotesFromSessions(isAuthenticated: boolean): Promise<string\n     // @@@ Load from localStorage for guests\n     const keys = Object.keys(localStorage);\n     for (const key of keys) {\n-      if (key === 'ink_memory_state' || key.startsWith('ink_memory_state_')) {\n+      if (key === STORAGE_KEYS.EDITOR_STATE || key.startsWith(`${STORAGE_KEYS.EDITOR_STATE}_`)) {\n         try {\n           const state = JSON.parse(localStorage.getItem(key) || '{}');\n           if (state.cells) {\n@@ -246,7 +247,7 @@ function TimelinePage({ isVisible }: { isVisible: boolean }) {\n         }\n       } else {\n         // Guest mode: load from localStorage\n-        const savedState = localStorage.getItem('ink_memory_state');\n+        const savedState = localStorage.getItem(STORAGE_KEYS.EDITOR_STATE);\n         if (savedState) {\n           try {\n             const state = JSON.parse(savedState);\n@@ -273,7 +274,7 @@ function TimelinePage({ isVisible }: { isVisible: boolean }) {\n         } catch (error) {\n           console.error('Failed to load pictures from database:', error);\n           // Fallback to localStorage\n-          const savedPictures = localStorage.getItem('daily-pictures');\n+          const savedPictures = localStorage.getItem(STORAGE_KEYS.DAILY_PICTURES);\n           if (savedPictures) {\n             try {\n               setPictures(JSON.parse(savedPictures));\n@@ -284,7 +285,7 @@ function TimelinePage({ isVisible }: { isVisible: boolean }) {\n         }\n       } else {\n         // Guest mode: load from localStorage\n-        const savedPictures = localStorage.getItem('daily-pictures');\n+        const savedPictures = localStorage.getItem(STORAGE_KEYS.DAILY_PICTURES);\n         if (savedPictures) {\n           try {\n             setPictures(JSON.parse(savedPictures));"
    },
    {
      "sha": "aac0a6565c71322a8c70f30630536968d1de01e8",
      "filename": "frontend/src/constants/storageKeys.ts",
      "status": "added",
      "additions": 31,
      "deletions": 0,
      "changes": 31,
      "blob_url": "https://github.com/shuxueshuxue/ink-and-memory/blob/22492fb9d5f37ce2e08097ef921cfc77d8a3437a/frontend%2Fsrc%2Fconstants%2FstorageKeys.ts",
      "raw_url": "https://github.com/shuxueshuxue/ink-and-memory/raw/22492fb9d5f37ce2e08097ef921cfc77d8a3437a/frontend%2Fsrc%2Fconstants%2FstorageKeys.ts",
      "contents_url": "https://api.github.com/repos/shuxueshuxue/ink-and-memory/contents/frontend%2Fsrc%2Fconstants%2FstorageKeys.ts?ref=22492fb9d5f37ce2e08097ef921cfc77d8a3437a",
      "patch": "@@ -0,0 +1,31 @@\n+/**\n+ * Storage keys constants\n+ *\n+ * Single source of truth for localStorage keys used across the application.\n+ * Using const assertion for type safety and autocomplete.\n+ */\n+\n+export const STORAGE_KEYS = {\n+  // Auth\n+  AUTH_TOKEN: 'auth_token',\n+  MIGRATION_COMPLETED: 'migration_completed',\n+\n+  // Editor State\n+  EDITOR_STATE: 'ink_memory_state',\n+  SELECTED_STATE: 'selected-state',\n+\n+  // Voice Configuration\n+  VOICE_CONFIGS: 'voice-configs',\n+  META_PROMPT: 'meta-prompt',\n+  STATE_CONFIG: 'state-config',\n+\n+  // Calendar & Pictures\n+  CALENDAR_ENTRIES: 'calendarEntries',\n+  DAILY_PICTURES: 'daily-pictures',\n+\n+  // Analysis\n+  ANALYSIS_REPORTS: 'analysisReports'\n+} as const;\n+\n+// Type for autocomplete\n+export type StorageKey = typeof STORAGE_KEYS[keyof typeof STORAGE_KEYS];"
    },
    {
      "sha": "b21a09202de6a7f614f892e92282b1f49b9652fe",
      "filename": "frontend/src/contexts/AuthContext.tsx",
      "status": "modified",
      "additions": 7,
      "deletions": 6,
      "changes": 13,
      "blob_url": "https://github.com/shuxueshuxue/ink-and-memory/blob/22492fb9d5f37ce2e08097ef921cfc77d8a3437a/frontend%2Fsrc%2Fcontexts%2FAuthContext.tsx",
      "raw_url": "https://github.com/shuxueshuxue/ink-and-memory/raw/22492fb9d5f37ce2e08097ef921cfc77d8a3437a/frontend%2Fsrc%2Fcontexts%2FAuthContext.tsx",
      "contents_url": "https://api.github.com/repos/shuxueshuxue/ink-and-memory/contents/frontend%2Fsrc%2Fcontexts%2FAuthContext.tsx?ref=22492fb9d5f37ce2e08097ef921cfc77d8a3437a",
      "patch": "@@ -6,6 +6,7 @@\n \n import { createContext, useContext, useState, useEffect } from 'react';\n import type { ReactNode } from 'react';\n+import { STORAGE_KEYS } from '../constants/storageKeys';\n \n const API_BASE = '/ink-and-memory';\n \n@@ -34,7 +35,7 @@ export function AuthProvider({ children }: { children: ReactNode }) {\n \n   // Load token from localStorage on mount\n   useEffect(() => {\n-    const savedToken = localStorage.getItem('auth_token');\n+    const savedToken = localStorage.getItem(STORAGE_KEYS.AUTH_TOKEN);\n     if (savedToken) {\n       // Verify token by fetching user info\n       fetch(`${API_BASE}/api/me`, {\n@@ -52,7 +53,7 @@ export function AuthProvider({ children }: { children: ReactNode }) {\n         })\n         .catch(() => {\n           // Token invalid, clear it\n-          localStorage.removeItem('auth_token');\n+          localStorage.removeItem(STORAGE_KEYS.AUTH_TOKEN);\n         })\n         .finally(() => {\n           setIsLoading(false);\n@@ -79,7 +80,7 @@ export function AuthProvider({ children }: { children: ReactNode }) {\n     const data = await response.json();\n     setUser(data.user);\n     setToken(data.token);\n-    localStorage.setItem('auth_token', data.token);\n+    localStorage.setItem(STORAGE_KEYS.AUTH_TOKEN, data.token);\n   };\n \n   const register = async (email: string, password: string, displayName?: string) => {\n@@ -103,13 +104,13 @@ export function AuthProvider({ children }: { children: ReactNode }) {\n     const data = await response.json();\n     setUser(data.user);\n     setToken(data.token);\n-    localStorage.setItem('auth_token', data.token);\n+    localStorage.setItem(STORAGE_KEYS.AUTH_TOKEN, data.token);\n   };\n \n   const logout = () => {\n     setUser(null);\n     setToken(null);\n-    localStorage.removeItem('auth_token');\n+    localStorage.removeItem(STORAGE_KEYS.AUTH_TOKEN);\n   };\n \n   return (\n@@ -141,5 +142,5 @@ export function useAuth() {\n  * Get current auth token for API calls\n  */\n export function getAuthToken(): string | null {\n-  return localStorage.getItem('auth_token');\n+  return localStorage.getItem(STORAGE_KEYS.AUTH_TOKEN);\n }"
    },
    {
      "sha": "15cc3eb691dbd62b7e3c4676d13570001ab46736",
      "filename": "frontend/src/engine/EditorEngine.ts",
      "status": "modified",
      "additions": 2,
      "deletions": 1,
      "changes": 3,
      "blob_url": "https://github.com/shuxueshuxue/ink-and-memory/blob/22492fb9d5f37ce2e08097ef921cfc77d8a3437a/frontend%2Fsrc%2Fengine%2FEditorEngine.ts",
      "raw_url": "https://github.com/shuxueshuxue/ink-and-memory/raw/22492fb9d5f37ce2e08097ef921cfc77d8a3437a/frontend%2Fsrc%2Fengine%2FEditorEngine.ts",
      "contents_url": "https://api.github.com/repos/shuxueshuxue/ink-and-memory/contents/frontend%2Fsrc%2Fengine%2FEditorEngine.ts?ref=22492fb9d5f37ce2e08097ef921cfc77d8a3437a",
      "patch": "@@ -4,6 +4,7 @@\n \n import { findNormalizedPhrase } from '../utils/textNormalize';\n import { debugLogger } from '../utils/debugLogger';\n+import { STORAGE_KEYS } from '../constants/storageKeys';\n \n // @@@ Core data model - cells + commentors + tasks + WeightPath\n export interface EditorState {\n@@ -376,7 +377,7 @@ export class EditorEngine {\n       const metaPrompt = getMetaPrompt();\n \n       // Get state prompt from localStorage\n-      const selectedState = localStorage.getItem('selected-state');\n+      const selectedState = localStorage.getItem(STORAGE_KEYS.SELECTED_STATE);\n       const stateConfig = getStateConfig();\n       const statePrompt = selectedState && stateConfig.states[selectedState]\n         ? stateConfig.states[selectedState].prompt"
    },
    {
      "sha": "b372d380783bb9b99d73a8871928e4c1b1367807",
      "filename": "frontend/src/utils/calendarStorage.ts",
      "status": "modified",
      "additions": 3,
      "deletions": 4,
      "changes": 7,
      "blob_url": "https://github.com/shuxueshuxue/ink-and-memory/blob/22492fb9d5f37ce2e08097ef921cfc77d8a3437a/frontend%2Fsrc%2Futils%2FcalendarStorage.ts",
      "raw_url": "https://github.com/shuxueshuxue/ink-and-memory/raw/22492fb9d5f37ce2e08097ef921cfc77d8a3437a/frontend%2Fsrc%2Futils%2FcalendarStorage.ts",
      "contents_url": "https://api.github.com/repos/shuxueshuxue/ink-and-memory/contents/frontend%2Fsrc%2Futils%2FcalendarStorage.ts?ref=22492fb9d5f37ce2e08097ef921cfc77d8a3437a",
      "patch": "@@ -1,4 +1,5 @@\n import type { EditorState } from '../engine/EditorEngine';\n+import { STORAGE_KEYS } from '../constants/storageKeys';\n \n export interface CalendarEntry {\n   id: string;\n@@ -11,10 +12,8 @@ export interface CalendarData {\n   [date: string]: CalendarEntry[]; // date format: YYYY-MM-DD\n }\n \n-const STORAGE_KEY = 'calendar-entries';\n-\n export function getCalendarData(): CalendarData {\n-  const stored = localStorage.getItem(STORAGE_KEY);\n+  const stored = localStorage.getItem(STORAGE_KEYS.CALENDAR_ENTRIES);\n   if (!stored) return {};\n   try {\n     return JSON.parse(stored);\n@@ -24,7 +23,7 @@ export function getCalendarData(): CalendarData {\n }\n \n export function saveCalendarData(data: CalendarData): void {\n-  localStorage.setItem(STORAGE_KEY, JSON.stringify(data));\n+  localStorage.setItem(STORAGE_KEYS.CALENDAR_ENTRIES, JSON.stringify(data));\n }\n \n export function getTodayKey(): string {"
    },
    {
      "sha": "e1480e90d1c5f4fb68ed071de6f039236045480b",
      "filename": "frontend/src/utils/voiceStorage.ts",
      "status": "modified",
      "additions": 8,
      "deletions": 11,
      "changes": 19,
      "blob_url": "https://github.com/shuxueshuxue/ink-and-memory/blob/22492fb9d5f37ce2e08097ef921cfc77d8a3437a/frontend%2Fsrc%2Futils%2FvoiceStorage.ts",
      "raw_url": "https://github.com/shuxueshuxue/ink-and-memory/raw/22492fb9d5f37ce2e08097ef921cfc77d8a3437a/frontend%2Fsrc%2Futils%2FvoiceStorage.ts",
      "contents_url": "https://api.github.com/repos/shuxueshuxue/ink-and-memory/contents/frontend%2Fsrc%2Futils%2FvoiceStorage.ts?ref=22492fb9d5f37ce2e08097ef921cfc77d8a3437a",
      "patch": "@@ -1,8 +1,5 @@\n import type { VoiceConfig, StateConfig } from '../types/voice';\n-\n-const KEY = 'voice-customizations';\n-const META_PROMPT_KEY = 'meta-prompt';\n-const STATE_CONFIG_KEY = 'state-config';\n+import { STORAGE_KEYS } from '../constants/storageKeys';\n \n // @@@ Default meta prompt: honest, pragmatic advice over role-playing fluff\n const DEFAULT_META_PROMPT = `Be honest and pragmatic. This is not actual Disco Elysium - prioritize the user's mental well-being and genuine insight over pure role-playing. Offer constructive perspectives that help with real thinking and writing, not just theatrical commentary.`;\n@@ -27,23 +24,23 @@ const DEFAULT_STATE_CONFIG: StateConfig = {\n };\n \n export const getVoices = (): Record<string, VoiceConfig> | null =>\n-  JSON.parse(localStorage.getItem(KEY) || 'null');\n+  JSON.parse(localStorage.getItem(STORAGE_KEYS.VOICE_CONFIGS) || 'null');\n \n export const saveVoices = (voices: Record<string, VoiceConfig>) =>\n-  localStorage.setItem(KEY, JSON.stringify(voices));\n+  localStorage.setItem(STORAGE_KEYS.VOICE_CONFIGS, JSON.stringify(voices));\n \n-export const clearVoices = () => localStorage.removeItem(KEY);\n+export const clearVoices = () => localStorage.removeItem(STORAGE_KEYS.VOICE_CONFIGS);\n \n export const getMetaPrompt = (): string =>\n-  localStorage.getItem(META_PROMPT_KEY) || DEFAULT_META_PROMPT;\n+  localStorage.getItem(STORAGE_KEYS.META_PROMPT) || DEFAULT_META_PROMPT;\n \n export const saveMetaPrompt = (prompt: string) =>\n-  localStorage.setItem(META_PROMPT_KEY, prompt);\n+  localStorage.setItem(STORAGE_KEYS.META_PROMPT, prompt);\n \n export const getStateConfig = (): StateConfig => {\n-  const stored = localStorage.getItem(STATE_CONFIG_KEY);\n+  const stored = localStorage.getItem(STORAGE_KEYS.STATE_CONFIG);\n   return stored ? JSON.parse(stored) : DEFAULT_STATE_CONFIG;\n };\n \n export const saveStateConfig = (config: StateConfig) =>\n-  localStorage.setItem(STATE_CONFIG_KEY, JSON.stringify(config));\n+  localStorage.setItem(STORAGE_KEYS.STATE_CONFIG, JSON.stringify(config));"
    }
  ]
}