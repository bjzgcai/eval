{
  "sha": "382ec7b66b0f1d2cd8009f1205425387d1f014fb",
  "node_id": "C_kwDOP2Zrm9oAKDM4MmVjN2I2NmIwZjFkMmNkODAwOWYxMjA1NDI1Mzg3ZDFmMDE0ZmI",
  "commit": {
    "author": {
      "name": "lexicalmathical",
      "email": "lexicalmathical@gmail.com",
      "date": "2025-11-18T15:02:13Z"
    },
    "committer": {
      "name": "lexicalmathical",
      "email": "lexicalmathical@gmail.com",
      "date": "2025-11-18T15:02:13Z"
    },
    "message": "Improve deck UI: fancy create button and editing in expanded section\n\n- Enhanced Create New Deck button with gradient, shadow, sparkle emoji\n- Moved deck name/description editing to expanded section as form fields\n- Header now purely for expand/collapse (single click)\n- Removed UX conflict between editing and expanding\n- Auto-save on blur for deck settings",
    "tree": {
      "sha": "de1a19b4a71cc8b929e18313268c8b98d827034e",
      "url": "https://api.github.com/repos/shuxueshuxue/ink-and-memory/git/trees/de1a19b4a71cc8b929e18313268c8b98d827034e"
    },
    "url": "https://api.github.com/repos/shuxueshuxue/ink-and-memory/git/commits/382ec7b66b0f1d2cd8009f1205425387d1f014fb",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null,
      "verified_at": null
    }
  },
  "url": "https://api.github.com/repos/shuxueshuxue/ink-and-memory/commits/382ec7b66b0f1d2cd8009f1205425387d1f014fb",
  "html_url": "https://github.com/shuxueshuxue/ink-and-memory/commit/382ec7b66b0f1d2cd8009f1205425387d1f014fb",
  "comments_url": "https://api.github.com/repos/shuxueshuxue/ink-and-memory/commits/382ec7b66b0f1d2cd8009f1205425387d1f014fb/comments",
  "author": null,
  "committer": null,
  "parents": [
    {
      "sha": "b636d9aa285ef06bbb6210bb77c66faaa6b5fb59",
      "url": "https://api.github.com/repos/shuxueshuxue/ink-and-memory/commits/b636d9aa285ef06bbb6210bb77c66faaa6b5fb59",
      "html_url": "https://github.com/shuxueshuxue/ink-and-memory/commit/b636d9aa285ef06bbb6210bb77c66faaa6b5fb59"
    }
  ],
  "stats": {
    "total": 274,
    "additions": 134,
    "deletions": 140
  },
  "files": [
    {
      "sha": "fd89c4230ff60e4b3179c059b869c0e2aae7fec2",
      "filename": "frontend/src/components/DeckManager.tsx",
      "status": "modified",
      "additions": 134,
      "deletions": 140,
      "changes": 274,
      "blob_url": "https://github.com/shuxueshuxue/ink-and-memory/blob/382ec7b66b0f1d2cd8009f1205425387d1f014fb/frontend%2Fsrc%2Fcomponents%2FDeckManager.tsx",
      "raw_url": "https://github.com/shuxueshuxue/ink-and-memory/raw/382ec7b66b0f1d2cd8009f1205425387d1f014fb/frontend%2Fsrc%2Fcomponents%2FDeckManager.tsx",
      "contents_url": "https://api.github.com/repos/shuxueshuxue/ink-and-memory/contents/frontend%2Fsrc%2Fcomponents%2FDeckManager.tsx?ref=382ec7b66b0f1d2cd8009f1205425387d1f014fb",
      "patch": "@@ -61,8 +61,6 @@ export default function DeckManager({ onUpdate }: Props) {\n   const [editingVoice, setEditingVoice] = useState<string | null>(null);\n   const [editingField, setEditingField] = useState<'name' | 'prompt' | null>(null);\n   const [iconPickerOpen, setIconPickerOpen] = useState<string | null>(null); // @@@ Track which voice's icon picker is open\n-  const [editingDeck, setEditingDeck] = useState<string | null>(null); // @@@ Track which deck is being edited\n-  const [deckEditingField, setDeckEditingField] = useState<'name' | 'description' | null>(null); // @@@ Track which deck field\n   const [deckIconPickerOpen, setDeckIconPickerOpen] = useState<string | null>(null); // @@@ Track which deck's icon picker is open\n   const [creatingDeck, setCreatingDeck] = useState(false);\n   const [creatingVoice, setCreatingVoice] = useState<string | null>(null);\n@@ -157,8 +155,6 @@ export default function DeckManager({ onUpdate }: Props) {\n     try {\n       await updateDeck(deckId, data);\n       await loadDecks(true);\n-      setEditingDeck(null);\n-      setDeckEditingField(null);\n       onUpdate?.();\n     } catch (err: any) {\n       alert(`Failed to update deck: ${err.message}`);\n@@ -381,27 +377,35 @@ export default function DeckManager({ onUpdate }: Props) {\n             onClick={handleCreateDeck}\n             disabled={creatingDeck}\n             style={{\n-              padding: '12px 24px',\n+              padding: '14px 28px',\n               marginBottom: '8px',\n-              background: '#f9a875',\n+              background: 'linear-gradient(135deg, #f9a875 0%, #f89560 100%)',\n               color: 'white',\n               border: 'none',\n-              borderRadius: '8px',\n+              borderRadius: '12px',\n               cursor: creatingDeck ? 'not-allowed' : 'pointer',\n-              fontSize: '14px',\n-              fontWeight: '500',\n+              fontSize: '15px',\n+              fontWeight: '600',\n               opacity: creatingDeck ? 0.6 : 1,\n-              transition: 'all 0.2s ease',\n-              alignSelf: 'flex-start'\n+              transition: 'all 0.3s cubic-bezier(0.4, 0, 0.2, 1)',\n+              alignSelf: 'flex-start',\n+              boxShadow: '0 4px 12px rgba(249, 168, 117, 0.3)',\n+              letterSpacing: '0.3px'\n             }}\n             onMouseEnter={(e) => {\n-              if (!creatingDeck) e.currentTarget.style.background = '#f89560';\n+              if (!creatingDeck) {\n+                e.currentTarget.style.transform = 'translateY(-2px)';\n+                e.currentTarget.style.boxShadow = '0 6px 20px rgba(249, 168, 117, 0.4)';\n+              }\n             }}\n             onMouseLeave={(e) => {\n-              if (!creatingDeck) e.currentTarget.style.background = '#f9a875';\n+              if (!creatingDeck) {\n+                e.currentTarget.style.transform = 'translateY(0)';\n+                e.currentTarget.style.boxShadow = '0 4px 12px rgba(249, 168, 117, 0.3)';\n+              }\n             }}\n           >\n-            {creatingDeck ? t('deck.actions.creating') : t('deck.actions.create')}\n+            {creatingDeck ? t('deck.actions.creating') : `âœ¨ ${t('deck.actions.create')}`}\n           </button>\n \n           {/* My Decks Section Header */}\n@@ -418,7 +422,6 @@ export default function DeckManager({ onUpdate }: Props) {\n           {decks.map(deck => {\n             const isExpanded = expandedDecks.has(deck.id);\n             const isSystem = !!deck.is_system; // @@@ Convert to boolean to prevent React from rendering \"0\"\n-            const isDeckEditing = editingDeck === deck.id;\n             const Icon = iconMap[deck.icon as keyof typeof iconMap] || FaBrain;\n             const colorHex = COLORS[deck.color as keyof typeof COLORS]?.hex || '#4a90e2';\n             const voiceCount = deck.voice_count || deck.voices?.length || 0;\n@@ -438,13 +441,15 @@ export default function DeckManager({ onUpdate }: Props) {\n               >\n                 {/* Deck Header */}\n                 <div\n+                  onClick={() => toggleDeck(deck.id)}\n                   style={{\n                     padding: 20,\n                     background: isSystem ? '#f9f9f9' : '#fafafa',\n                     display: 'flex',\n                     alignItems: 'center',\n                     gap: 16,\n-                    transition: 'background 0.2s'\n+                    transition: 'background 0.2s',\n+                    cursor: 'pointer'\n                   }}\n                 >\n                   {/* Expand/Collapse Icon */}\n@@ -581,132 +586,36 @@ export default function DeckManager({ onUpdate }: Props) {\n                     })()}\n                   </div>\n \n-                  {/* Deck Info with inline editing */}\n+                  {/* Deck Info - Display Only */}\n                   <div style={{ flex: 1, minWidth: 0 }}>\n-                    {/* Deck Name */}\n-                    {!isDeckEditing || deckEditingField !== 'name' ? (\n-                      <div\n-                        onClick={(e) => {\n-                          e.stopPropagation();\n-                          if (!isSystem) {\n-                            setEditingDeck(deck.id);\n-                            setDeckEditingField('name');\n-                          }\n-                        }}\n-                        style={{\n-                          fontSize: 20,\n-                          fontWeight: 700,\n-                          color: '#2c2c2c',\n-                          marginBottom: 4,\n-                          cursor: isSystem ? 'default' : 'pointer',\n-                          transition: 'opacity 0.2s'\n-                        }}\n-                        onMouseEnter={(e) => {\n-                          if (!isSystem) e.currentTarget.style.opacity = '0.7';\n-                        }}\n-                        onMouseLeave={(e) => {\n-                          if (!isSystem) e.currentTarget.style.opacity = '1';\n-                        }}\n-                      >\n-                        {deck.name}\n-                        {isSystem && (\n-                          <span style={{\n-                            marginLeft: 12,\n-                            fontSize: 12,\n-                            fontWeight: 500,\n-                            color: '#888',\n-                            background: '#e0e0e0',\n-                            padding: '2px 8px',\n-                            borderRadius: 4\n-                          }}>\n-                            {t('deck.labels.system')}\n-                          </span>\n-                        )}\n-                      </div>\n-                    ) : (\n-                      <input\n-                        autoFocus\n-                        defaultValue={deck.name}\n-                        onClick={(e) => e.stopPropagation()}\n-                        onBlur={(e) => {\n-                          handleUpdateDeck(deck.id, { name: e.target.value });\n-                        }}\n-                        onKeyDown={(e) => {\n-                          if (e.key === 'Enter') {\n-                            e.currentTarget.blur();\n-                          } else if (e.key === 'Escape') {\n-                            setEditingDeck(null);\n-                            setDeckEditingField(null);\n-                          }\n-                        }}\n-                        style={{\n-                          width: '100%',\n-                          fontSize: 20,\n-                          fontWeight: 700,\n-                          color: '#2c2c2c',\n-                          padding: '4px 8px',\n-                          border: '2px solid #4a90e2',\n-                          borderRadius: 4,\n-                          background: '#f0f8ff',\n-                          marginBottom: 4\n-                        }}\n-                      />\n-                    )}\n+                    <div style={{\n+                      fontSize: 20,\n+                      fontWeight: 700,\n+                      color: '#2c2c2c',\n+                      marginBottom: 4\n+                    }}>\n+                      {deck.name}\n+                      {isSystem && (\n+                        <span style={{\n+                          marginLeft: 12,\n+                          fontSize: 12,\n+                          fontWeight: 500,\n+                          color: '#888',\n+                          background: '#e0e0e0',\n+                          padding: '2px 8px',\n+                          borderRadius: 4\n+                        }}>\n+                          {t('deck.labels.system')}\n+                        </span>\n+                      )}\n+                    </div>\n \n-                    {/* Deck Description */}\n-                    {!isDeckEditing || deckEditingField !== 'description' ? (\n-                      <div\n-                        onClick={(e) => {\n-                          e.stopPropagation();\n-                          if (!isSystem) {\n-                            setEditingDeck(deck.id);\n-                            setDeckEditingField('description');\n-                          }\n-                        }}\n-                        style={{\n-                          fontSize: 14,\n-                          color: '#666',\n-                          cursor: isSystem ? 'default' : 'pointer',\n-                          transition: 'opacity 0.2s'\n-                        }}\n-                        onMouseEnter={(e) => {\n-                          if (!isSystem) e.currentTarget.style.opacity = '0.7';\n-                        }}\n-                        onMouseLeave={(e) => {\n-                          if (!isSystem) e.currentTarget.style.opacity = '1';\n-                        }}\n-                      >\n-                        {deck.description || t('deck.labels.noDescription')}\n-                      </div>\n-                    ) : (\n-                      <textarea\n-                        autoFocus\n-                        defaultValue={deck.description || ''}\n-                        onClick={(e) => e.stopPropagation()}\n-                        onBlur={(e) => {\n-                          handleUpdateDeck(deck.id, { description: e.target.value });\n-                        }}\n-                        onKeyDown={(e) => {\n-                          if (e.key === 'Escape') {\n-                            setEditingDeck(null);\n-                            setDeckEditingField(null);\n-                          }\n-                        }}\n-                        style={{\n-                          width: '100%',\n-                          minHeight: '60px',\n-                          fontSize: 14,\n-                          color: '#666',\n-                          padding: '6px 8px',\n-                          border: '2px solid #4a90e2',\n-                          borderRadius: 4,\n-                          background: '#f0f8ff',\n-                          fontFamily: 'inherit',\n-                          resize: 'vertical',\n-                          boxSizing: 'border-box'\n-                        }}\n-                      />\n-                    )}\n+                    <div style={{\n+                      fontSize: 14,\n+                      color: '#666'\n+                    }}>\n+                      {deck.description || t('deck.labels.noDescription')}\n+                    </div>\n \n                     <div style={{\n                       fontSize: 12,\n@@ -859,6 +768,91 @@ export default function DeckManager({ onUpdate }: Props) {\n                 {/* Voices List (Expanded) */}\n                 {isExpanded && (\n                   <div style={{ padding: 20, background: '#fafafa' }}>\n+                    {/* @@@ Deck Edit Form (only for user-owned decks) */}\n+                    {!isSystem && (\n+                      <div style={{\n+                        background: '#fff',\n+                        border: '2px solid #e0e0e0',\n+                        borderRadius: 8,\n+                        padding: 16,\n+                        marginBottom: 16\n+                      }}>\n+                        <h4 style={{\n+                          margin: '0 0 12px 0',\n+                          fontSize: 14,\n+                          fontWeight: 600,\n+                          color: '#666'\n+                        }}>\n+                          Deck Settings\n+                        </h4>\n+\n+                        {/* Deck Name Field */}\n+                        <div style={{ marginBottom: 12 }}>\n+                          <label style={{\n+                            display: 'block',\n+                            fontSize: 12,\n+                            fontWeight: 500,\n+                            color: '#888',\n+                            marginBottom: 4\n+                          }}>\n+                            Name\n+                          </label>\n+                          <input\n+                            type=\"text\"\n+                            defaultValue={deck.name}\n+                            onBlur={(e) => {\n+                              if (e.target.value !== deck.name) {\n+                                handleUpdateDeck(deck.id, { name: e.target.value });\n+                              }\n+                            }}\n+                            onClick={(e) => e.stopPropagation()}\n+                            style={{\n+                              width: '100%',\n+                              padding: '8px 12px',\n+                              fontSize: 14,\n+                              border: '1px solid #ddd',\n+                              borderRadius: 6,\n+                              fontFamily: 'inherit',\n+                              boxSizing: 'border-box'\n+                            }}\n+                          />\n+                        </div>\n+\n+                        {/* Deck Description Field */}\n+                        <div>\n+                          <label style={{\n+                            display: 'block',\n+                            fontSize: 12,\n+                            fontWeight: 500,\n+                            color: '#888',\n+                            marginBottom: 4\n+                          }}>\n+                            Description\n+                          </label>\n+                          <textarea\n+                            defaultValue={deck.description || ''}\n+                            onBlur={(e) => {\n+                              if (e.target.value !== deck.description) {\n+                                handleUpdateDeck(deck.id, { description: e.target.value });\n+                              }\n+                            }}\n+                            onClick={(e) => e.stopPropagation()}\n+                            style={{\n+                              width: '100%',\n+                              minHeight: 80,\n+                              padding: '8px 12px',\n+                              fontSize: 14,\n+                              border: '1px solid #ddd',\n+                              borderRadius: 6,\n+                              fontFamily: 'inherit',\n+                              resize: 'vertical',\n+                              boxSizing: 'border-box'\n+                            }}\n+                          />\n+                        </div>\n+                      </div>\n+                    )}\n+\n                     {deck.voices && deck.voices.length > 0 && (\n                       <div style={{\n                         display: 'grid',"
    }
  ]
}